# Whisper Transcription

## Configuration
- BASEDIR (input for m4b's): /Volumes/Reading/audiobooks/John Gwynne - Faithful and the Fallen/John Gwynne - Faithful and the Fallen 04 - Wrath
- MODEL_SHORTNAME: tiny.en
- DURATION: 300000 seconds
- OUTDIR: ./bench-results
- SCRIPT_DIR: /Users/daniel/Code/iMetrical/ai-garden/whisper-sh
- WHISPER_HOME: /Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp
- WHISPER_EXEC: /Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/main

# Scanning for .m4b in: /Volumes/Reading/audiobooks/John Gwynne - Faithful and the Fallen/John Gwynne - Faithful and the Fallen 04 - Wrath

## Processing John Gwynne - Faithful and the Fallen 04 - Wrath

### Converting to WAV file
.wav already exists. Skipping conversion...

### Transcribing to SRT/VTT/JSON
Launching whisper transcribe...
CMD: /Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/main -f ./bench-results/John Gwynne - Faithful and the Fallen 04 - Wrath.wav -m /Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/models/ggml-tiny.en.bin --output-vtt -of ./bench-results/John Gwynne - Faithful and the Fallen 04 - Wrath.tiny.en.d300000 -d 300000
whisper_init_from_file_with_params_no_state: loading model from '/Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/models/ggml-tiny.en.bin'
whisper_model_load: loading model
whisper_model_load: n_vocab       = 51864
whisper_model_load: n_audio_ctx   = 1500
whisper_model_load: n_audio_state = 384
whisper_model_load: n_audio_head  = 6
whisper_model_load: n_audio_layer = 4
whisper_model_load: n_text_ctx    = 448
whisper_model_load: n_text_state  = 384
whisper_model_load: n_text_head   = 6
whisper_model_load: n_text_layer  = 4
whisper_model_load: n_mels        = 80
whisper_model_load: ftype         = 1
whisper_model_load: qntvr         = 0
whisper_model_load: type          = 1 (tiny)
whisper_model_load: adding 1607 extra tokens
whisper_model_load: n_langs       = 99
whisper_backend_init: using Metal backend
ggml_metal_init: allocating
ggml_metal_init: found device: Apple M2 Pro
ggml_metal_init: picking default device: Apple M2 Pro
ggml_metal_init: default.metallib not found, loading from source
ggml_metal_init: GGML_METAL_PATH_RESOURCES = nil
ggml_metal_init: loading '/Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/ggml-metal.metal'
ggml_metal_init: GPU name:   Apple M2 Pro
ggml_metal_init: GPU family: MTLGPUFamilyApple8  (1008)
ggml_metal_init: GPU family: MTLGPUFamilyCommon3 (3003)
ggml_metal_init: GPU family: MTLGPUFamilyMetal3  (5001)
ggml_metal_init: simdgroup reduction support   = true
ggml_metal_init: simdgroup matrix mul. support = true
ggml_metal_init: hasUnifiedMemory              = true
ggml_metal_init: recommendedMaxWorkingSetSize  = 22906.50 MB
whisper_model_load:    Metal total size =    77.11 MB
whisper_model_load: model size    =   77.11 MB
whisper_backend_init: using Metal backend
ggml_metal_init: allocating
ggml_metal_init: found device: Apple M2 Pro
ggml_metal_init: picking default device: Apple M2 Pro
ggml_metal_init: default.metallib not found, loading from source
ggml_metal_init: GGML_METAL_PATH_RESOURCES = nil
ggml_metal_init: loading '/Users/daniel/Code/iMetrical/ai-garden/external-repos/whisper.cpp/ggml-metal.metal'
ggml_metal_init: GPU name:   Apple M2 Pro
ggml_metal_init: GPU family: MTLGPUFamilyApple8  (1008)
ggml_metal_init: GPU family: MTLGPUFamilyCommon3 (3003)
ggml_metal_init: GPU family: MTLGPUFamilyMetal3  (5001)
ggml_metal_init: simdgroup reduction support   = true
ggml_metal_init: simdgroup matrix mul. support = true
ggml_metal_init: hasUnifiedMemory              = true
ggml_metal_init: recommendedMaxWorkingSetSize  = 22906.50 MB
whisper_init_state: kv self size  =    8.26 MB
whisper_init_state: kv cross size =    9.22 MB
whisper_init_state: compute buffer (conv)   =   13.32 MB
whisper_init_state: compute buffer (encode) =   87.96 MB
whisper_init_state: compute buffer (cross)  =    4.01 MB
whisper_init_state: compute buffer (decode) =   96.02 MB

system_info: n_threads = 4 / 10 | AVX = 0 | AVX2 = 0 | AVX512 = 0 | FMA = 0 | NEON = 1 | ARM_FMA = 1 | METAL = 1 | F16C = 0 | FP16_VA = 1 | WASM_SIMD = 0 | BLAS = 1 | SSE3 = 0 | SSSE3 = 0 | VSX = 0 | CUDA = 0 | COREML = 0 | OPENVINO = 0

main: processing './bench-results/John Gwynne - Faithful and the Fallen 04 - Wrath.wav' (1346112041 samples, 84132.0 sec), 4 threads, 1 processors, 5 beams + best of 5, lang = en, task = transcribe, timestamps = 1 ...


[00:00:00.000 --> 00:00:09.020]   Roth, Book 4 of the Faithful and the Fallen, by John Gwynn, read by Damien Lynch.
[00:00:09.020 --> 00:00:17.160]   Roth and vengeance poured, John Milton, Paradise Lost.
[00:00:17.160 --> 00:00:23.000]   Chapter 1 There it is.
[00:00:23.000 --> 00:00:30.000]   The year 1144 of the Age of Exiles, Hound moon.
[00:00:30.000 --> 00:00:34.000]   There it is, fell through the night air, weightless.
[00:00:34.000 --> 00:00:37.000]   He caught glimpses of the Tower of Bricken.
[00:00:37.000 --> 00:00:43.000]   Caledas is still smoldering outline at the window, then below, the river coming up to meet him.
[00:00:43.000 --> 00:00:47.000]   He slammed into the water, the cold shocking the breath out of him.
[00:00:47.000 --> 00:00:52.000]   He panicked, disorientated, realizing he didn't know which way was up.
[00:00:52.000 --> 00:00:55.000]   All about him was darkness and ice.
[00:00:55.000 --> 00:01:02.000]   Then something grabbed his hair, and he was surging upwards, breaking through the water in a burst of spray,
[00:01:02.000 --> 00:01:06.000]   and saw Alsion's pale broad face staring back at him.
[00:01:06.000 --> 00:01:13.000]   "They will come hunting for us," the giant shouted over the roar of the river, as the current gripped them,
[00:01:13.000 --> 00:01:17.000]   sweeping them away from the thunder of warriors' feet crossing the bridge.
[00:01:17.000 --> 00:01:21.000]   "Let the water take us far from them."
[00:01:21.000 --> 00:01:27.000]   Verida saw the sense of that, though his hands and feet were already numbing from the cold.
[00:01:27.000 --> 00:01:34.000]   He put some effort into swimming, speeding his way from Bricken, from Caledas, from the Qadashim.
[00:01:34.000 --> 00:01:38.000]   The thought still jolted him like a blow.
[00:01:38.000 --> 00:01:44.000]   They turned a bend in the river, and the fortress was gone, darkness in folding them.
[00:01:44.000 --> 00:01:53.000]   The soft weak sheen of dawn's gray light filtered down through the lattice of branches above, as Verida's met Alsion's gaze,
[00:01:53.000 --> 00:01:59.000]   an unspoken agreement passing between them, as they both headed for the river back.
[00:01:59.000 --> 00:02:05.000]   It was harder going, swimming across the current, and Verida's realized how exhausted his body was,
[00:02:05.000 --> 00:02:12.000]   but eventually he felt silt beneath his feet, his hands grasping at reeds as he pulled himself out of the water,
[00:02:12.000 --> 00:02:17.000]   and flopped onto his back, gasping, his limbs feeling lead-filled.
[00:02:17.000 --> 00:02:20.000]   Turning, he saw Alsion on the bank.
[00:02:20.000 --> 00:02:27.000]   Thirty of forty paces up river from him, staggering wearily towards him before he slumped down beside him with a groan,
[00:02:27.000 --> 00:02:30.000]   water dripping from his drooping moustache.
[00:02:30.000 --> 00:02:34.000]   "Thank you," Alsion said.
[00:02:34.000 --> 00:02:36.000]   "For what?"
[00:02:36.000 --> 00:02:37.000]   "Everything.
[00:02:37.000 --> 00:02:41.000]   Most of all, for helping my family escape Bricken's dungeons.
[00:02:41.000 --> 00:02:44.000]   His wife and bern.
[00:02:44.000 --> 00:02:47.000]   How long has he gone without seeing them?
[00:02:47.000 --> 00:02:52.000]   And what must he have suffered, knowing they were Caledus and Lycosy's prisoners?
[00:02:52.000 --> 00:02:57.000]   And for destroying Caledus's effigy of me?"
[00:02:57.000 --> 00:03:01.000]   Alsion continued, "You have set me free."
[00:03:01.000 --> 00:03:05.000]   He gave a shudder, followed by a smile.
[00:03:05.000 --> 00:03:09.000]   "A shadow is gone from my soul.
[00:03:09.000 --> 00:03:11.000]   I feel reborn."
[00:03:11.000 --> 00:03:15.000]   "If you mean you feel weak as a newborn bern,"
[00:03:15.000 --> 00:03:19.000]   Veridus muttered as he emptied his boot of water and tried to pull it back on.
[00:03:19.000 --> 00:03:21.000]   "Then I feel the same."
[00:03:21.000 --> 00:03:25.000]   "That is not what I mean," the giant rumbled,
[00:03:25.000 --> 00:03:28.000]   regarding Veridus with serious eyes.
[00:03:28.000 --> 00:03:31.000]   "You set Rainer and Tane free."
[00:03:31.000 --> 00:03:34.000]   "You set me free."
[00:03:34.000 --> 00:03:37.000]   "I owe you a deck beyond all imagining."
[00:03:37.000 --> 00:03:42.000]   "You are in no debt to me," Veridus said.
[00:03:42.000 --> 00:03:45.000]   "I kick the effigy's into the fire on impulse,
[00:03:45.000 --> 00:03:49.000]   not really knowing what they were or what power they held over you."
[00:03:49.000 --> 00:03:51.000]   "But you suspected."
[00:03:51.000 --> 00:03:52.000]   "I."
[00:03:52.000 --> 00:03:56.000]   "Something that Fidele said."
[00:03:56.000 --> 00:04:00.000]   He thought of Nithair's mother, hoped that she had made it to freedom
[00:04:00.000 --> 00:04:05.000]   along with his brother, Krelis, McIn, and Halbin.
[00:04:05.000 --> 00:04:10.000]   And your wife and son, I set them free because it was the right thing to do."
[00:04:10.000 --> 00:04:13.000]   "There was no other choice."
[00:04:13.000 --> 00:04:17.000]   "Ah, but there was true heart.
[00:04:17.000 --> 00:04:20.000]   There always is."
[00:04:20.000 --> 00:04:22.000]   Veridus shrugged.
[00:04:22.000 --> 00:04:24.000]   "There is no debt between us."
[00:04:24.000 --> 00:04:27.000]   "You are my friend."
[00:04:27.000 --> 00:04:30.000]   "One of my only friends," it has turned out.
[00:04:30.000 --> 00:04:33.000]   His thoughts swept bitterly to Nithair,
[00:04:33.000 --> 00:04:37.000]   and the confession and revelations that had stunned Veridus.
[00:04:37.000 --> 00:04:40.000]   He remembered Calidus's confession.
[00:04:40.000 --> 00:04:45.000]   That Nithair had slain Aquilis, his own father.
[00:04:45.000 --> 00:04:48.000]   Anger and shame twisted through him.
[00:04:48.000 --> 00:04:51.000]   "There had been so many signs."
[00:04:51.000 --> 00:04:55.000]   "How can I have been deceived for so long?"
[00:04:55.000 --> 00:04:59.400]   "I am a fool. How long?"
output_vtt: saving output to './bench-results/John Gwynne - Faithful and the Fallen 04 - Wrath.tiny.en.d300000.vtt'

whisper_print_timings:     load time =   115.40 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time = 44237.48 ms
whisper_print_timings:   sample time =  1289.79 ms /  5350 runs (    0.24 ms per run)
whisper_print_timings:   encode time =   447.11 ms /    12 runs (   37.26 ms per run)
whisper_print_timings:   decode time =   121.38 ms /    64 runs (    1.90 ms per run)
whisper_print_timings:   batchd time =  3612.15 ms /  5228 runs (    0.69 ms per run)
whisper_print_timings:   prompt time =    86.61 ms /  2013 runs (    0.04 ms per run)
whisper_print_timings:    total time = 51392.83 ms
ggml_metal_free: deallocating
ggml_metal_free: deallocating

51.437s
